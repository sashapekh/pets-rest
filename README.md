# Pets Search REST API

REST API –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É –ø–æ—à—É–∫—É —Ç–∞ –æ–≥–æ–ª–æ—à–µ–Ω—å –ø—Ä–æ —Ç–≤–∞—Ä–∏–Ω.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- Docker —Ç–∞ Docker Compose
- Go 1.22+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)

### –ó–∞–ø—É—Å–∫ –∑ Docker Compose

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone <repository-url>
cd pets_search/rest
```

2. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:
```bash
cp example.env .env
```

3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏:
```bash
docker-compose up -d
```

4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É API:
```bash
curl http://localhost:8080/healthz
```

### –°–µ—Ä–≤—ñ—Å–∏

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏:

- **API**: http://localhost:8080
- **MinIO Console**: http://localhost:9090 (minioadmin/minioadmin)
- **MongoDB**: localhost:27017 (admin/password)
- **Redis**: localhost:6379

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ cmd/api/                 # –í—Ö—ñ–¥–Ω–∞ —Ç–æ—á–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∏
‚îú‚îÄ‚îÄ internal/                # –í–Ω—É—Ç—Ä—ñ—à–Ω—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ listings/           # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ users/              # –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ storage/            # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ S3/MinIO
‚îÇ   ‚îú‚îÄ‚îÄ pdf/                # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è PDF
‚îÇ   ‚îú‚îÄ‚îÄ qrcode/             # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è QR-–∫–æ–¥—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ database/           # –†–æ–±–æ—Ç–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ pkg/                    # –ü—É–±–ª—ñ—á–Ω—ñ –ø–∞–∫–µ—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # HTTP middleware
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # –£—Ç–∏–ª—ñ—Ç–∏
‚îú‚îÄ‚îÄ web/                    # –í–µ–±-—Ä–µ—Å—É—Ä—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ templates/          # HTML —à–∞–±–ª–æ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ static/             # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ deployments/            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–µ–ø–ª–æ—é
‚îî‚îÄ‚îÄ scripts/                # –°–∫—Ä–∏–ø—Ç–∏
```

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
docker-compose up -d mongodb redis minio minio-init
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Go:
```bash
go mod tidy
```

3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å API:
```bash
go run ./cmd/api
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
go get -u ./...
go mod tidy
```

## üìã API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `POST /auth/magic-link` - –í—ñ–¥–ø—Ä–∞–≤–∫–∞ magic link
- `POST /auth/magic-link/verify` - –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è magic link

### –û–≥–æ–ª–æ—à–µ–Ω–Ω—è
- `GET /api/v1/listings` - –°–ø–∏—Å–æ–∫ –æ–≥–æ–ª–æ—à–µ–Ω—å
- `POST /api/v1/listings` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è
- `GET /api/v1/listings/{id}` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è
- `PUT /api/v1/listings/{id}` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è
- `DELETE /api/v1/listings/{id}` - –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è
- `POST /api/v1/listings/{id}/images` - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ
- `POST /api/v1/listings/{id}/generate-pdf` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è PDF

### –ü—É–±–ª—ñ—á–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- `GET /p/{slug}` - –ü—É–±–ª—ñ—á–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è

### –°–∏—Å—Ç–µ–º–∞
- `GET /healthz` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤—ñ—Å—É

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î MongoDB –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏:

- **users** - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Å–∏—Å—Ç–µ–º–∏
- **listings** - –û–≥–æ–ª–æ—à–µ–Ω–Ω—è –ø—Ä–æ —Ç–≤–∞—Ä–∏–Ω
- **events** - –ê–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ –ø–æ–¥—ñ—ó

## üì¶ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

- [Fiber v2](https://github.com/gofiber/fiber) - HTTP framework
- [MongoDB Go Driver](https://github.com/mongodb/mongo-go-driver) - MongoDB –¥—Ä–∞–π–≤–µ—Ä
- [Redis Go Client](https://github.com/go-redis/redis) - Redis –∫–ª—ñ—î–Ω—Ç
- [MinIO Go SDK](https://github.com/minio/minio-go) - S3-—Å—É–º—ñ—Å–Ω–∏–π –∫–ª—ñ—î–Ω—Ç

## üîí –ë–µ–∑–ø–µ–∫–∞

- –í—Å—ñ –ø–∞—Ä–æ–ª—ñ —Ç–∞ –∫–ª—é—á—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω—ñ —É production
- JWT —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- Rate limiting –¥–ª—è API endpoints

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

[–í–∫–∞–∂—ñ—Ç—å –ª—ñ—Ü–µ–Ω–∑—ñ—é]
