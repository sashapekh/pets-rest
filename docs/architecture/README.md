# ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

## ğŸ—ï¸ Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğ° Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

Pets Search REST API Ğ¿Ğ¾Ğ±ÑƒĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ñ– Ñ‡Ğ¸ÑÑ‚Ğ¾Ñ— Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¸ (Clean Architecture) Ğ· Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»ĞµĞ½Ğ½ÑĞ¼ Ğ½Ğ° ÑˆĞ°Ñ€Ğ¸.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Mobile App    â”‚    â”‚   Public Pages  â”‚
â”‚   (React/Vue)   â”‚    â”‚   (React Native)â”‚    â”‚   (SSR)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   REST API      â”‚
                    â”‚   (Fiber v3)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚             â”‚             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚   MongoDB    â”‚ â”‚ Redis  â”‚ â”‚   MinIO     â”‚
        â”‚   (Database) â”‚ â”‚(Cache) â”‚ â”‚ (Files/S3)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ¿Ğ°Ğ¿ĞºĞ¸

```
cmd/api/                    # Ğ’Ñ…Ñ–Ğ´Ğ½Ğ° Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¸
â”œâ”€â”€ main.go                # HTTP ÑĞµÑ€Ğ²ĞµÑ€ Ñ‚Ğ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ

internal/                   # ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ´ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¸
â”œâ”€â”€ config/                # ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ
â”œâ”€â”€ listings/              # Ğ‘Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºĞ° Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½ÑŒ
â”œâ”€â”€ users/                 # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°Ğ¼Ğ¸
â”œâ”€â”€ storage/               # Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ° Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸ (S3/MinIO)
â”œâ”€â”€ pdf/                   # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ PDF
â”œâ”€â”€ qrcode/                # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ QR ĞºĞ¾Ğ´Ñ–Ğ²
â””â”€â”€ database/              # Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ° Ğ· Ğ±Ğ°Ğ·Ğ¾Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…

pkg/                       # ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ñ– Ğ¿Ğ°ĞºĞµÑ‚Ğ¸
â”œâ”€â”€ middleware/            # HTTP middleware
â””â”€â”€ utils/                 # Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ñ– ÑƒÑ‚Ğ¸Ğ»Ñ–Ñ‚Ğ¸

web/                       # Ğ’ĞµĞ± Ñ€ĞµÑÑƒÑ€ÑĞ¸
â”œâ”€â”€ templates/             # HTML ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ Ğ´Ğ»Ñ SSR
â””â”€â”€ static/                # CSS, JS, Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ¸ Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¸

1. **Separation of Concerns** - ĞºĞ¾Ğ¶ĞµĞ½ Ğ¿Ğ°ĞºĞµÑ‚ Ğ¼Ğ°Ñ” Ğ¾Ğ´Ğ½Ñƒ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ
2. **Dependency Injection** - Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ– Ğ¿ĞµÑ€ĞµĞ´Ğ°ÑÑ‚ÑŒÑÑ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€Ğ¸
3. **Interface Segregation** - Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºÑ–, ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–Ñ‡Ğ½Ñ– Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¸
4. **Clean Code** - Ñ‡Ğ¸Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¸Ğ¹ Ñ‚Ğ° Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒĞ²Ğ°Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ´

## ğŸ—„ï¸ Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ… (MongoDB)

### ĞšĞ¾Ğ»ĞµĞºÑ†Ñ–Ñ `users`
```javascript
{
  _id: ObjectId,
  email: String,           // required, unique
  phone: String,           // optional
  name: String,            // optional
  created_at: Date,        // required
  updated_at: Date         // optional
}
```

### ĞšĞ¾Ğ»ĞµĞºÑ†Ñ–Ñ `listings`
```javascript
{
  _id: ObjectId,
  user_id: ObjectId,       // required, ref: users
  type: String,            // required: "lost" | "found" | "adopt"
  title: String,           // required
  description: String,     // optional
  city: String,            // optional
  location: String,        // optional
  contact_phone: String,   // optional
  contact_tg: String,      // optional
  status: String,          // required: "draft" | "active" | "archived"
  slug: String,            // unique, for public URLs
  images: [String],        // array of image URLs
  created_at: Date,        // required
  updated_at: Date         // optional
}
```

### ĞšĞ¾Ğ»ĞµĞºÑ†Ñ–Ñ `events`
```javascript
{
  _id: ObjectId,
  user_id: ObjectId,       // optional, ref: users
  listing_id: ObjectId,    // required, ref: listings
  type: String,            // required: "view" | "qr_scan" | "contact_click"
  payload: Object,         // optional, additional data
  ip_address: String,      // optional
  user_agent: String,      // optional
  created_at: Date         // required
}
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ñ–Ğº Ğ´Ğ°Ğ½Ğ¸Ñ…

### 1. Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½Ğ½Ñ
```
User â†’ API â†’ Validation â†’ Database â†’ File Upload â†’ QR/PDF Generation
```

### 2. ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ´ Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½Ğ½Ñ
```
Request â†’ API â†’ Database â†’ Cache Check â†’ Response + Event Logging
```

### 3. ĞŸĞ¾ÑˆÑƒĞº Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½ÑŒ
```
Search Query â†’ API â†’ Database Query â†’ Cache â†’ Filtered Results
```

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ‡Ğ½Ğ¸Ğ¹ ÑÑ‚ĞµĞº

### Backend
- **Go 1.22+** - Ğ¼Ğ¾Ğ²Ğ° Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼ÑƒĞ²Ğ°Ğ½Ğ½Ñ
- **Fiber v3** - HTTP framework
- **MongoDB** - NoSQL Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…
- **Redis** - ĞºĞµÑˆÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° ÑĞµÑÑ–Ñ—
- **MinIO** - S3-ÑÑƒĞ¼Ñ–ÑĞ½Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğµ ÑÑ…Ğ¾Ğ²Ğ¸Ñ‰Ğµ

### Ğ†Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
- **Docker** - ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ
- **Docker Compose** - Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ ÑĞµÑ€Ğ²Ñ–ÑÑ–Ğ²
- **Make** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ğ·Ğ±Ñ–Ñ€ĞºĞ¸

### Ğ—Ğ¾Ğ²Ğ½Ñ–ÑˆĞ½Ñ– ÑĞµÑ€Ğ²Ñ–ÑĞ¸
- **SMTP** - Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ° email (magic links)
- **S3/MinIO** - Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ğ½Ğ½Ñ Ñ„Ğ¾Ñ‚Ğ¾ Ñ‚Ğ° PDF
- **QR ĞºĞ¾Ğ´ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€** - Ğ´Ğ»Ñ Ğ´Ñ€ÑƒĞºĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ… Ğ¼Ğ°Ñ‚ĞµÑ€Ñ–Ğ°Ğ»Ñ–Ğ²

## ğŸš¦ API Routes

```
# ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ
POST   /auth/magic-link         # Ğ’Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ° magic link
POST   /auth/magic-link/verify  # Ğ’ĞµÑ€Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ

# ĞĞ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½Ğ½Ñ (Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ—)
GET    /api/v1/listings         # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½ÑŒ
POST   /api/v1/listings         # Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ
GET    /api/v1/listings/:id     # Ğ”ĞµÑ‚Ğ°Ğ»Ñ–
PUT    /api/v1/listings/:id     # ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ
DELETE /api/v1/listings/:id     # Ğ’Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ

# Ğ¤Ğ°Ğ¹Ğ»Ğ¸
POST   /api/v1/listings/:id/images    # Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ñ„Ğ¾Ñ‚Ğ¾
POST   /api/v1/listings/:id/pdf       # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ PDF

# ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ñ– ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸
GET    /p/:slug                 # ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğµ Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑˆĞµĞ½Ğ½Ñ

# Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°
GET    /healthz                 # Health check
```

## ğŸ” Ğ‘ĞµĞ·Ğ¿ĞµĞºĞ°

1. **ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ**: Magic links Ñ‡ĞµÑ€ĞµĞ· email
2. **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ**: JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ¸
3. **Ğ’Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ**: Ğ’ÑÑ– Ğ²Ñ…Ñ–Ğ´Ğ½Ñ– Ğ´Ğ°Ğ½Ñ–
4. **Rate Limiting**: ĞĞ±Ğ¼ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ²
5. **CORS**: ĞĞ°Ğ»Ğ°ÑˆÑ‚Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ´Ğ»Ñ frontend
6. **File Upload**: ĞĞ±Ğ¼ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ‚Ğ¸Ğ¿Ñ–Ğ² Ñ‚Ğ° Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ€Ñ–Ğ² Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²
