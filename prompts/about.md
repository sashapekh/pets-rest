# Pets Search API (Golang + Fiber)

## üéØ –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è
REST API –¥–ª—è —Å–µ—Ä–≤—ñ—Å—É –ø–æ—à—É–∫—É —Ç–∞ –æ–≥–æ–ª–æ—à–µ–Ω—å –ø—Ä–æ —Ç–≤–∞—Ä–∏–Ω. 
API –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞:
- —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è–º–∏ (–∑–Ω–∞–π–¥–µ–Ω—ñ, –∑–∞–≥—É–±–ª–µ–Ω—ñ, –≤—ñ–¥–¥–∞–º —É –¥–æ–±—Ä—ñ —Ä—É–∫–∏);
- –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–æ—Ç–æ (—á–µ—Ä–µ–∑ S3 –∞–±–æ —ñ–Ω—à–µ —Å—É–º—ñ—Å–Ω–µ —Å—Ö–æ–≤–∏—â–µ);
- –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é QR-–∫–æ–¥—ñ–≤ —ñ PDF –¥–ª—è –¥—Ä—É–∫—É;
- –ø—É–±–ª—ñ—á–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è –æ–≥–æ–ª–æ—à–µ–Ω—å;
- –∞–Ω–∞–ª—ñ—Ç–∏–∫—É (–ø–µ—Ä–µ–≥–ª—è–¥–∏, —Å–∫–∞–Ω–∏ QR).

---

## ‚öôÔ∏è –°—Ç–µ–∫
- Go (v1.25+)
- Fiber v2
- MongoDB
- Redis (—Å–µ—Å—ñ—ó, –∫–µ—à)
- S3 (MinIO / AWS S3) –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–æ—Ç–æ —Ç–∞ PDF
- Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É

---

## üìÇ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- `cmd/api` ‚Äî –≤—Ö—ñ–¥–Ω–∞ —Ç–æ—á–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `internal/listings` ‚Äî –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –æ–≥–æ–ª–æ—à–µ–Ω—å
- `internal/users` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è/—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (magic link, email/phone)
- `internal/storage` ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ S3
- `internal/pdf` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è PDF
- `internal/qrcode` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è QR

---

## üîë –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- Magic link —á–µ—Ä–µ–∑ email (–Ω–∞ –º–∞–π–±—É—Ç–Ω—î ‚Äî —á–µ—Ä–µ–∑ SMS/Telegram).
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

### 2. –û–≥–æ–ª–æ—à–µ–Ω–Ω—è (Listings)
- CRUD –¥–ª—è –æ–≥–æ–ª–æ—à–µ–Ω—å.
- –ü–æ–ª—è:  
  - `id`, `user_id`  
  - `type` (lost | found | adopt)  
  - `title`, `description`, `city`, `location`  
  - `contact_phone`, `contact_tg`  
  - `status` (draft | active | archived)  
  - `created_at`, `updated_at`
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ (pre-signed URLs ‚Üí S3).
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è QR ‚Üí `https://domain/p/{slug}`
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è PDF –¥–ª—è –¥—Ä—É–∫—É (—à–∞–±–ª–æ–Ω–∏: A4, A5, –≤—ñ–∑–∏—Ç–∫–∞).

### 3. –ü—É–±–ª—ñ—á–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- `GET /p/{slug}` ‚Üí –≤—ñ–¥–¥–∞—î JSON –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –∞–±–æ SSR-—Å—Ç–æ—Ä—ñ–Ω–∫—É.
- –í—ñ–¥–∫—Ä–∏—Ç—ñ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.
- –ú–∞—é—Ç—å OG-—Ç–µ–≥–∏ –¥–ª—è –≥–∞—Ä–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ Telegram/FB.

### 4. –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
- –ü–æ–¥—ñ—ó: –ø–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–æ—Ä—ñ–Ω–∫–∏, —Å–∫–∞–Ω QR.
- –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ñ `events` (user_id?, listing_id, type, payload, created_at).
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–∫—ñ–ª—å–∫–∏ –ª—é–¥–µ–π –≤—ñ–¥—Å–∫–∞–Ω—É–≤–∞–ª–∏ QR).

---

## üìå –û—Å–Ω–æ–≤–Ω—ñ endpoints (—á–µ—Ä–Ω–µ—Ç–∫–∞)
- `POST /auth/magic-link`
- `POST /auth/magic-link/verify`
- `GET /api/v1/listings`
- `POST /api/v1/listings`
- `GET /api/v1/listings/{id}`
- `PUT /api/v1/listings/{id}`
- `DELETE /api/v1/listings/{id}`
- `POST /api/v1/listings/{id}/images`
- `POST /api/v1/listings/{id}/generate-pdf`
- `GET /healthz`

---
